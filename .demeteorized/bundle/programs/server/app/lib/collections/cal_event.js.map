{"version":3,"sources":["meteor://ðŸ’»app/lib/collections/cal_event.js"],"names":[],"mappings":"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","file":"/lib/collections/cal_event.js","sourcesContent":["CalEvent = new Mongo.Collection('calevent');\n// CalEvent.attachSchema([\n//   EventLogic,\n//   DetailsSchema,\n//   DatesSchema,\n//   RecurSchema,\n//   LocationSchema\n// ]);\n\nRecurSchema = new SimpleSchema({\n  type: {\n    type: String,\n    label: \"Type of Class\",\n    allowedValues: ['classes','lesson', 'course'],\n    autoform: {\n      type: \"select-radio\",\n      options: {\n        classes: \"None Recurring\",\n        lesson: \"Lesson (individual classes with separate attendee list)\",\n        course: \"Course (a recurring class with the same attendees)\",\n      }\n    }\n  },\n  intervalNumber: {\n    type: Number,\n    label: \"Repeat this class every...\",\n  },\n  intervalType: {\n    type: String,\n    label: \"Interval\",\n    allowedValues: ['days', 'weeks', \"months\", \"years\"],\n    autoform: {\n      type: \"select-radio-inline\",\n      options: {\n        days: \"Days\",\n        weeks: \"Weeks\",\n        months: \"Months\",\n        years: \"Years\"\n      }\n    }\n  },\n  intervalStop: {\n    type: Number,\n    label: \"Stop after this many occurances.\",\n    max: 365\n  },\n});\n\nCalEvent.attachSchema(new SimpleSchema({\n  createdAt: {\n    type: Date,\n    autoValue: function() {\n      if (this.isInsert) {\n        return new Date;\n      } else if (this.isUpsert) {\n        return {$setOnInsert: new Date};\n      } else {\n        this.unset();  // Prevent user from supplying their own value\n      }\n    },\n    autoform: {\n      omit: true\n    },\n  },\n  title: {\n    type: String,\n    label: \"Title\",\n    max: 200,\n    defaultValue: \"New Class\",\n  },\n  start: {\n    type: String,\n    label: \"Start Date and Time\",\n    autoform: {\n      afFieldInput: {\n        type: \"datetimepicker\",\n        class: \"form-control\",\n        readonly: true,\n      }\n    }\n  },\n  end: {\n    type: String,\n    label: \"End Date and Time\",\n    autoform: {\n      afFieldInput: {\n        type: \"datetimepicker\",\n        class: \"form-control\",\n        readonly: true,\n      }\n    },\n  },\n\n  category: {\n    type: String,\n    allowedValues: [\n      'academic',\n      'beauty_style',\n      'computer',\n      'crafts_hobbies',\n      'culinary',\n      'health_wellness',\n      'language',\n      'music',\n      'performance',\n      'sports',\n      'fitness',\n      'arts',\n      'religious',\n      'homeschool',\n      'other'\n    ],\n    autoform: {\n      type: \"select\",\n      options: {\n        academic: \"Academics\",\n        beauty_style: \"Beauty & Style\",\n        computer: \"Computers & Technology\",\n        crafts_hobbies: \"Craft & Hobbies\",\n        culinary: \"Culinary\",\n        health_wellness: \"Health & Wellness\",\n        language: \"Language\",\n        music: \"Music\",\n        performance: \"Performaning Arts\",\n        sports: \"Sports & Athletics\",\n        fitness: \"Fitness\",\n        arts: \"Creative Arts\",\n        religious: \"Religious\",\n        homeschool: \"Homeschool\",\n        other: \"Other\"\n      }\n    },\n    optional: true\n  },\n\n  description: {\n    type: String,\n    optional: true,\n    label: \"Description\",\n    defaultValue: \"Write class description here.\",\n    autoValue: function(){\n      if( Meteor.isServer ){\n        return sanitizeHtml( this.value, {\n          allowedTags: [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'p', 'a', 'ul', 'ol', 'nl', 'li', 'b', 'i', 'strong', 'em', 'strike', 'code', 'hr', 'br', 'div', 'table', 'thead', 'caption', 'tbody', 'tr', 'th', 'td', 'pre' ],\n        } );\n      }else{\n        return this.value;\n      }\n    },\n\n  },\n  owner: {\n    type: String,\n    autoValue: function() {\n      return Meteor.userId();\n    },\n    autoform: {\n      omit: true\n    },\n  },\n  ownerName: {\n    type: String,\n    autoValue: function() {\n      if (Meteor.user().profile.businessName) {\n        return Meteor.user().profile.businessName;\n      } else {\n        return Meteor.user().emails[0].address;\n      }\n    },\n    autoform: {\n      omit: true\n    },\n  },\n  allDay: {\n    type: Boolean,\n    label: \"All Day Event\",\n    optional: true,\n  },\n  recur: {\n    type: RecurSchema,\n    label: \"Recurring Structure (optional)\",\n    optional: true,\n  },\n  price: {\n  type: Number,\n  label: \"Price in $ (leave blank if class is free)\",\n  optional: true,\n  min: 10,\n  max: 900000,\n  defaultValue: 25,\n  },\n\n  attendeeCount: {\n    type: Number,\n    label: \"Attendee Limit\",\n    optional: true,\n    min: 1,\n    defaultValue: 10,\n  },\n  street: {\n    type: String,\n    max: 100,\n    // defaultValue: function() {\n    //   var user = Meteor.user().profile;\n    //   if (user.businessAddress.street != null) {\n    //     return user.businessAddress.street;\n    //   }\n    // }\n  },\n  city: {\n    type: String,\n    max: 50,\n    // defaultValue: function() {\n    //   var user = Meteor.user().profile;\n    //   return user.businessAddress.street;\n    // }\n  },\n  state: {\n    type: String,\n    regEx: /^A[LKSZRAEP]|C[AOT]|D[EC]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHJMVY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY]$/,\n    autoform: {\n      options: function () {\n        return _.map([\"AK\",\"AL\",\"AR\",\"AZ\",\"CA\",\"CO\",\"CT\",\"DC\",\"DE\",\"FL\",\"GA\",\"GU\",\"HI\",\"IA\",\"ID\", \"IL\",\"IN\",\"KS\",\"KY\",\"LA\",\"MA\",\"MD\",\"ME\",\"MH\",\"MI\",\"MN\",\"MO\",\"MS\",\"MT\",\"NC\",\"ND\",\"NE\",\"NH\",\"NJ\",\"NM\",\"NV\",\"NY\", \"OH\",\"OK\",\"OR\",\"PA\",\"PR\",\"PW\",\"RI\",\"SC\",\"SD\",\"TN\",\"TX\",\"UT\",\"VA\",\"VI\",\"VT\",\"WA\",\"WI\",\"WV\",\"WY\"], function (c, i) {\n          return {label: c, value: c};\n        });\n      }\n    }\n  },\n  zip: {\n    type: String,\n    regEx: /^[0-9]{5}$/,\n    // defaultValue: function() {\n    //   var user = Meteor.user().profile;\n    //   return user.businessAddress.street;\n    // }\n  },\n  courseId: {\n    type: String,\n    optional: true,\n    autoform: {\n      omit: true\n    },\n  },\n  canceled: {\n    type: Boolean,\n    defaultValue: false,\n    autoform: {\n      omit: true\n    },\n  },\n\n  selected: {\n    type: Boolean,\n    defaultValue: false,\n    autoform: {\n      omit: true\n    },\n  }\n}));\n\n\n"]}