{"version":3,"sources":["meteor://üíªapp/server/methods/location_methods.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,OAAO,CAAC;AACb,QAAM,EAAE,UAAS,GAAG,EAAE;AACpB,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,QAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC;AACjB,QAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;;AAElB,QAAI,CAAC,GAAG,QAAQ,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACpC,QAAI,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AACtB,YAAM,IAAI,MAAM,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC;KAChD,MAAM;AACP,UAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAC9C,OAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAS,IAAI,EAAC;AAC3B,YAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAC,GAAG,EAAE,IAAI,EAAC,CAAC,CAAC,KAAK,EAAE,CAAC;AAC/C,SAAC,CAAC,OAAO,CAAC,KAAK,EAAE,UAAS,KAAK,EAAC;AAC9B,cAAI,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,GAAG,EAAE,KAAK,CAAC,GAAG,EAAC,CAAC,KAAK,SAAS,EAAE;AACvD,kBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;WACpB;SACF,CAAC,CAAC;OACJ,CAAC,CAAC;AACL,aAAO,MAAM,CAAC;KACb;GACF;;;;;;;;;;;;;;;;;;;CAqBF,CAAC,CAAC,sE","file":"/server/methods/location_methods.js","sourcesContent":["Meteor.methods({\n  search: function(doc) {\n    var events = [];\n    var c = doc.city;\n    var s = doc.state;\n\n    var l = Zipcodes.lookupByName(c, s);\n    if (l[0] === undefined) {\n      throw new Meteor.Error(\"Check your location!\");\n    } else {\n    var rad = Zipcodes.radius(l[0].zip, doc.radius);\n      _.forEach(rad, function(item){\n        var event = CalEvent.find({zip: item}).fetch();\n        _.forEach(event, function(items){\n          if (_.findWhere(events, {_id: items._id}) === undefined) {\n            events.push(items);\n          }\n        });\n      });\n    return events;\n    }\n  }\n\n\n\n    // var zipPatt = new RegExp(/^[0-9]{5}$/);\n    // var cityStatePatt = new RegExp(/[a-zA-Z√°√©√≠√≥√∫√†√®√¨√≤√π√£√µ√¢√™√¥√º√ß√Å√â√ç√ì√ö√Ä√à√å√í√ô√Ç√ä√î√É√ï√ú√á\\s]{1,32}[\\s]*,[\\s]*[A-Za-z]{2}/);\n    // var zip = zipPatt.test(doc.location);\n\n    // if (zip) {\n    //   var rad = Zipcodes.radius(doc.location, doc.radius);\n    //   _.forEach(rad, function(item){\n    //     var event = CalEvent.find({zip: item}).fetch();\n    //     _.forEach(event, function(items){\n    //       events.push(items);\n    //     });\n    //   });\n\n    // } else if (cityStatePatt){\n    //   var strip = doc.location.trim();\n    //   var comma = ',';\n    //   var loc = strip.split(comma, 2);\n});"]}