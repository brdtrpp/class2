{"version":3,"sources":["meteor://ðŸ’»app/server/methods/search_methods.js"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,CAAC,OAAO,CAAC;AACb,QAAM,EAAE,UAAS,GAAG,EAAE;AACpB,QAAI,MAAM,GAAG,EAAE,CAAC;AAChB,OAAG,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC5B,OAAG,CAAC,SAAS,GAAG,MAAM,EAAE,CAAC,EAAE,CAAC;;AAE5B,QAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,CAAC;AAC7C,KAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAS,GAAG,EAAC;AAC1B,UAAI,GAAG,CAAC,OAAO,EAAE;AACf,YAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,EAAE,EAAC,CAAC,CAAC,KAAK,EAAE,CAAC;OACzH,MAAM;AACL,YAAI,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAC,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAC,CAAC,CAAC,KAAK,EAAE,CAAC;OACxF;AACD,OAAC,CAAC,OAAO,CAAC,KAAK,EAAE,UAAS,KAAK,EAAC;AAC9B,YAAI,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE,EAAC,GAAG,EAAE,KAAK,CAAC,GAAG,EAAC,CAAC,KAAK,SAAS,EAAE;AACvD,gBAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpB;OACF,CAAC,CAAC;KACJ,CAAC,CAAC;AACL,WAAO,CAAC,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;GAClC;;AAED,WAAS,EAAG,UAAS,GAAG,EAAE;AACxB,WAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;GAClB;CACF,CAAC,CAAC,sE","file":"/server/methods/search_methods.js","sourcesContent":["Meteor.methods({\n  search: function(doc) {\n    var events = [];\n    doc.owner = Meteor.userId();\n    doc.createdAt = moment()._d;\n\n    var rad = Zipcodes.radius(doc.zip, doc.radius);\n      _.forEach(rad, function(zip){\n        if (doc.keyword) {\n          var event = CalEvent.find({category: doc.category, zip: zip, canceled: false, $text: { $search: doc.keyword }}).fetch();\n        } else {\n          var event = CalEvent.find({category: doc.category, zip: zip, canceled: false}).fetch();\n        }\n        _.forEach(event, function(items){\n          if (_.findWhere(events, {_id: items._id}) === undefined) {\n            events.push(items);\n          }\n        });\n      });\n    return _.sortBy(events, 'start');\n  },\n\n  'cSearch' : function(doc) {\n    console.log(doc);\n  },\n});"]}